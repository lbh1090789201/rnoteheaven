
<% provide :title, "教育经历" %>
<% provide :content, "保存" %>

<div class="edit_basic edit-work-experiences edit-education" id="edit_education">
    <%= simple_form_for :education_experience, url: webapp_education_experiences_path,remote: true, :method => :post  do |f| %>
      <div class="job-pubilc">
        <%= f.input :college, label: "学        校", input_html: { class: "user-input", id: "user_school", name: "college"} %>
        <span class="empty-cont" onclick="EmptyCont('user_school')"></span>
      </div>
      <div class="job-pubilc">
        <%= f.input :major, label: '专       业', input_html: { class: "user-input", id: "user_major", name: "major"} %>
        <span class="empty-cont" onclick="EmptyCont('user_major')"></span>
      </div>
      <%= f.input :education_degree, label: '学        历', input_html: { readonly: "readonly",class: "education-degree user-input", id: "education_degree", name: "education_degree"} %>
      <%= f.input :entry_at, label: '开始时间', as: :string, input_html: { class: "user-input", id: "beginTime", name: "entry_at"} %>
      <%= f.input :graduated_at, label: '结束时间', input_html: { class: "user-input", id: "endTime", name: "graduated_at"} %>
      <%= f.submit "提交", id: "submit", style: "display: none"%>
      <button type="button" name="button" id="btn_save" class="btn btn-info btn-right">提交</button>
    <% end %>
    <div id="datePlugin"></div>
</div>


<%= javascript_include_tag "date" %>
<script type="text/javascript">
  fullScreen('.edit_basic');

  // 表单验证
  formAll("#edit_education form")

  // 防重复点击
  $("#btn_save").on('click',function() {

    // 验证表单,失败返回
    if(valid("#edit_education form")){
      // 表单验证提示语弹窗
      var timer = setTimeout(function(){
        unvalidAlert();
      },5)
      
      return
    }

    $("#btn_save").css("pointer-events","none");
    $(':submit').trigger('click');
  })

  //学历
  $('.education-degree').click(function() {
    this.blur()
    var education_degree = ['大专以下', '大专','本科', '硕士', '博士', '博士后'];
    addComponent("#wrap", education_degree, '#education_degree')
  });

  var start = {
      dateCell: '#beginTime',
      format: 'YYYY-MM-DD',
      minDate: '1900-01-01', //设定最小日期为当前日期
      ishmsVal:false,
      maxDate: '2099-06-30', //最大日期
      choosefun: function(elem,datas){
          //console.log(datas)
          end.minDate = datas; //开始日选好后，重置结束日的最小日期
      }
  };
  var end = {
      dateCell: '#endTime',
      format: 'YYYY-MM-DD',
      minDate: '1900-01-01', //设定最小日期为当前日期
      ishmsVal:false,
      maxDate: '2099-06-16', //最大日期
      choosefun: function(elem,datas){
          //console.log(end.minDate)
          start.maxDate = datas; //将结束日的初始值设定为开始日的最大日期
      }
  };
  jeDate(start);
  jeDate(end);

  // 判断时间插件 今天按钮是否需置灰
  preventClick("#beginTime", "#endTime");

</script>
